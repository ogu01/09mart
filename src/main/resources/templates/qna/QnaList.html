<!DOCTYPE html>
<html lang="ko">

<head>
	<title>home</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="author" content="">
	<meta name="keywords" content="">
	<meta name="description" content="">

	<link rel="stylesheet" href="/css/headStyle.css" />

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="css/vendor.css">
	<!--<link rel="stylesheet" type="text/css" href="style.css">-->

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
		rel="stylesheet">
	<style>
		body {
			display: flex;
			flex-direction: column;
			min-height: 100vh;
		}

		.main-content {
			display: flex;
			flex: 1;
		}

		.faq-content,
		#qnaList,
		#noticeList {
			display: none;
			/* 기본적으로 FAQ, Q&A, 공지사항 내용을 숨김 */
			margin-top: 20px;
		}

		.faq-card {
			margin-bottom: 15px;
			/* 카드 간격 */
		}

		.answer {
			display: none;
			/* 기본적으로 답변 내용을 숨김 */
			padding: 10px;
			border-left: 3px solid #007bff;
			/* 왼쪽 테두리 추가 */
			background-color: #f8f9fa;
			/* 배경색 추가 */
			text-align: left;
			/* 텍스트 정렬을 왼쪽으로 설정 */
			line-height: 1.5;
			/* 줄 간격 조정 */
		}

		.sidebar-footer {
			margin-top: auto;
			/* 사이드바의 마지막 부분을 아래로 밀기 */
			padding: 10px;
			/* 패딩 추가 */
			text-align: center;
			/* 중앙 정렬 */
		}

		/* 가로선만 표시하기 위한 스타일 */
		table {
			border-collapse: collapse;
		}

		th,
		td {
			border: none;
			/* 기본 경계 제거 */
			border-bottom: 1px solid #dee2e6;
			/* 가로선 추가 */
		}

		th {
			background-color: #f8f9fa;
			/* 헤더 배경색 */
		}

		/* 각 셀의 오른쪽 경계 제거 */
		td:not(:last-child) {
			border-right: none;
		}

		.category {
			padding: 5px;
			/* 여백 추가 */
			border-radius: 5px;
			/* 테두리 둥글게 */
			color: #fff;
			/* 글자 색상 */
		}

		.category-a {
			background-color: #007bff !important;
			/* 기타 분류 색상 */
			color: #fff !important;
		}

		.category-b {
			background-color: #28a745 !important;
			/* 취소 분류 색상 */
			color: #fff !important;
		}

		.category-c {
			background-color: #dc3545 !important;
			/* 배송 지원 분류 색상 */
			color: #fff !important;
		}

		.active {
			background-color: #ffc107 !important;
			/* 클릭한 항목의 색상 */
			color: white;
			/* 클릭한 항목의 글자색 */
		}

		.notice-card {
			padding: 15px;
			margin-bottom: 15px;
			border: 1px solid #dee2e6;
			border-radius: 5px;
			background-color: #f8f9fa;
		}

		.notice-title {
			font-size: 1.25rem;
			font-weight: bold;
		}

		.notice-content {
			margin: 10px 0;
		}

		.notice-date {
			font-size: 0.9rem;
			color: #6c757d;
		}

		.notice-number {
			background-color: white !important;
			/* 배경색을 투명으로 설정 */
			color: inherit !important;
			/* 글자 색상을 하얀색으로 설정 */
			padding: 5px;
			/* 패딩 추가 */
			border-radius: 5px;
			/* 둥근 모서리 */
		}


		#noticeList,
		#faqContent,
		#qnaList {
			background-color: #f8f9fa;
			/* FAQ와 동일한 배경색 */
			padding: 20px;
			/* 패딩 추가 */
			border-radius: 5px;
			/* 둥근 모서리 */
			border: 1px solid #dee2e6;
			/* 테두리 추가 */
		}

		.notice-content {
			display: none;
			/* 기본적으로 숨김 */
			padding: 10px;
			border-left: 3px solid #007bff;
			/* 왼쪽 테두리 추가 */
			background-color: #f8f9fa;
			/* 배경색 추가 */
			text-align: left;
			/* 텍스트 정렬을 왼쪽으로 설정 */
			line-height: 1.5;
			/* 줄 간격 조정 */
		}
	</style>





</head>

<body>
	<!-- 상단 부분 -->
	<div th:if="${session.loginId != null}">
		<div th:replace="mhead :: head"></div>
	</div>
	<div th:if="${session.loginAid != null}">
		<div th:replace="manager/ahead :: head"></div>
	</div>

	<div class="main-content mt-4">
		<!-- 사이드바 -->
		<div class="d-flex flex-column flex-shrink-0 p-3 bg-body-tertiary" style="width: 280px; height:500px;">
			<hr>
			<ul class="nav nav-pills flex-column mb-auto">
				<li class="nav-item">
					<a id="noticeMenu" href="javascript:void(0);" class="nav-link link-body-emphasis"
						onclick="toggleNotice()">
						공지사항
					</a>
				</li>
				<li>
					<a id="faqMenu" href="javascript:void(0);" class="nav-link link-body-emphasis"
						onclick="toggleFAQ()">
						FAQ
					</a>
				</li>
				<li>
					<a id="qnaMenu" href="javascript:void(0);" class="nav-link link-body-emphasis"
						onclick="toggleQnA()">
						1:1문의
					</a>
				</li>
			</ul>
			<div class="sidebar-footer">
				<span class="fs-6 text-muted">고객상담센터 </span>
				<h5 class="mb-0">010-3410-7285</h5>
			</div>
		</div>

		<!-- 메인 컨텐츠 -->
		<div class="container mt-4" style="max-width: 1000px; flex: 1; min-height: 620px;">
			<hr>

			<!-- 공지사항 리스트 -->
			<div id="noticeList" style="display: none;">
			    <div class="container mt-4">
			        <div class="bg-light text-center rounded p-4" style="width: 100%; min-height: 500px; padding: 40px 20px; border-radius: 15px;">
			            <div class="d-flex justify-content-between align-items-center mb-4">
			                <h2 class="mb-0 flex-grow-1" style="text-align: center; font-size: 2.5rem;">공지사항</h2>
			            </div>
			            <table class="table table-hover table-bordered table-striped" style="border-top: 1px solid #6c757d; font-size: 1.25rem;">
			                <thead>
			                    <tr>
			                        <th scope="col">번호</th>
			                        <th scope="col">제목</th>
			                        <th scope="col">작성자</th>
			                        <th scope="col">날짜</th>
			                    </tr>
			                </thead>
			                <tbody th:each="notice, noticeStat : ${notice}" th:if="${noticeStat.index < 6}" style="cursor: pointer;">
			                    <tr>
			                        <th scope="row" th:text="${notice.id}">1</th>
			                        <td th:text="${notice.ntitle}" th:onclick="|location.href='@{/notice/detail/{id}(id=${notice.id})}'|">첫 번째 게시글 제목</td>
			                        <td>관리자</td>
			                        <td th:text="${#temporals.format(notice.ndate, 'yyyy-MM-dd HH:mm:ss')}">2024-09-10</td>
			                    </tr>
			                </tbody>
			            </table>
			        </div>
			     
			     
			    </div>
			</div>


			<!-- Q&A 리스트 -->
			<div id="qnaList" class="faq-content" style="display: none;">
				<h3 class="text-center">1:1 문의 내역</h3>
				<hr>
				<table class="table">
					<thead>
						<tr>
							<th style="width: 50px;">번호</th>
							<th>제목</th>
							<th>답변 여부</th>
							<th>등록시간</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="qna : ${qna}" th:onclick="displayAnswer(this, [[${qna.managercontents}]])"
							style="cursor: pointer;"
							th:if="${qna.member.id == session.loginId}">
							<td th:text="${qna.id}"></td>
							<td th:text="${qna.qnatitle}"></td>
							<td>
								<span class="badge" th:text="${qna.managercontents != null ? '답변 완료' : '답변 대기'}"
									th:classappend="${qna.managercontents != null} ? 'bg-success' : 'bg-primary'"></span>
							</td>
							<td th:text="${#temporals.format(qna.qnadate, 'yyyy-MM-dd HH:mm:ss')}"></td>
						</tr>
					</tbody>
				</table>
			</div>

			<!-- FAQ 내용 추가 -->
			<div id="faqContent" class="faq-content" style="display: none;">
				<h3 class="text-center">자주 묻는 질문</h3>
				<hr>
				<table class="table">
					<thead>
						<tr>
							<th style="width: 50px;">번호</th> <!-- 번호 칸 좁게 -->
							<th style="width: 50px;">분류</th> <!-- 분류 칸 좁게 -->
							<th>질문</th> <!-- 질문 칸 넓게 -->
						</tr>
					</thead>
					<tbody>
						<tr onclick="toggleAnswer('answer1')" style="cursor: pointer;">
							<td>1</td>
							<td class="category category-a">기타</td>
							<td><strong>Q.: 제품 재고에 대한 문의</strong></td>
						</tr>
						<tr id="answer1" class="answer" style="display: none;">
							<td colspan="3" style="text-align: left;">A1: 제품 재고는 판매자에게 댓글로 남기시면 됩니다.</td>
						</tr>
						<tr onclick="toggleAnswer('answer2')" style="cursor: pointer;">
							<td>2</td>
							<td class="category category-b">취소</td>
							<td><strong>Q.: 주문을 취소하고 싶어요.</strong></td>
						</tr>
						<tr id="answer2" class="answer" style="display: none;">
							<td colspan="3" style="text-align: left;">A2: 죄송합니다 처음에는 기능을 구현할려고 했으나 시간 관계상 캔슬되었습니다.</td>
						</tr>
						<tr onclick="toggleAnswer('answer3')" style="cursor: pointer;">
							<td>3</td>
							<td class="category category-c">배송</td>
							<td><strong>Q.: 배송 시간을 알 수 있나요?</strong></td>
						</tr>
						<tr id="answer3" class="answer" style="display: none;">
							<td colspan="3" style="text-align: left;">A3:배송시간은 담당 기사를 통해서 들을수 있습니다 문의 남겨주시면 기사님에게 연락 드리겟습니다.</td>
						</tr>
					</tbody>
				</table>
			</div>

			<!-- 글쓰기 버튼 -->
			<div class="d-flex justify-content-end" style="margin-top: 20px;">
				<a id="writeButton" href="/Qna/register" class="btn btn-dark"
					style="width: 150px; display: none;">문의하기</a>
			</div>
		</div>
	</div>


	<div th:replace="Footer::footer"></div>
	<script src="/js/jquery-1.11.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
		crossorigin="anonymous"></script>
	<script src="/js/plugins.js"></script>
	<script src="/js/script.js"></script>

	<script>
		window.onload = function() {
		           toggleNotice();
		       };
		document.addEventListener("DOMContentLoaded", function () {
			const writeButton = document.getElementById("writeButton");
			writeButton.style.display = "none";

			// 공지사항 내용 클릭 시 표시하는 함수
			window.displayNoticeContent = function (row, noticeContent) {
				const existingContent = row.nextElementSibling;

				if (existingContent && existingContent.classList.contains('notice-content')) {
					existingContent.style.display = existingContent.style.display === 'none' || existingContent.style.display === '' ? 'table-row' : 'none';
				} else {
					const newRow = document.createElement('tr');
					newRow.className = 'notice-content';
					newRow.style.display = 'table-row';

					const content = noticeContent ? noticeContent : "내용이 없습니다.";
					newRow.innerHTML = `<td colspan="3" style="text-align: left; padding-left: 20px;">내용: ${content}</td>`;

					row.parentNode.insertBefore(newRow, row.nextSibling);
				}
			};
		});
		// 메뉴 활성화 함수
		function setActiveMenu(menuId) {
			const menus = document.querySelectorAll('.nav-link');
			menus.forEach(menu => {
				menu.classList.remove('active'); // 모든 메뉴에서 active 클래스 제거
			});
			const activeMenu = document.getElementById(menuId);
			activeMenu.classList.add('active'); // 클릭한 메뉴에 active 클래스 추가
		}

		// FAQ 내용을 토글하는 함수
		function toggleFAQ() {
			setActiveMenu('faqMenu'); // 클릭한 메뉴에 active 클래스 추가
			const faqContent = document.getElementById("faqContent");
			faqContent.style.display = faqContent.style.display === "none" || faqContent.style.display === "" ? "block" : "none";

			const qnaList = document.getElementById("qnaList");
			qnaList.style.display = "none"; // FAQ가 열릴 때 Q&A 리스트 숨기기

			const noticeList = document.getElementById("noticeList");
			noticeList.style.display = "none"; // FAQ가 열릴 때 공지사항 숨기기

			const writeButton = document.getElementById("writeButton");
			writeButton.style.display = "none"; // FAQ를 열 때 버튼 숨기기


			// FAQ 열 때 모든 답변 숨기기
			const answers = document.querySelectorAll('.answer');
			answers.forEach(answer => {
				answer.style.display = 'none'; // 모든 답변 숨김
			});
			// 공지사항 내용 숨기기
			const noticeContents = document.querySelectorAll('.notice-content');
			noticeContents.forEach(content => {
				content.style.display = 'none'; // 모든 공지사항 내용 숨김
			});
		}

		// 질문 클릭 시 답변을 토글하는 함수
		function toggleAnswer(answerId) {
			const answer = document.getElementById(answerId);
			answer.style.display = answer.style.display === "none" || answer.style.display === "" ? "table-row" : "none";
		}

		// Q&A 리스트를 토글하는 함수
		function toggleQnA() {
			setActiveMenu('qnaMenu'); // 클릭한 메뉴에 active 클래스 추가
			const qnaList = document.getElementById("qnaList");
			qnaList.style.display = qnaList.style.display === "none" || qnaList.style.display === "" ? "block" : "none";

			const faqContent = document.getElementById("faqContent");
			faqContent.style.display = "none"; // Q&A가 열릴 때 FAQ 숨기기

			const noticeList = document.getElementById("noticeList");
			noticeList.style.display = "none"; // 공지사항이 열릴 때 숨기기

			const writeButton = document.getElementById("writeButton");
			writeButton.style.display = qnaList.style.display === "block" ? "block" : "none"; // Q&A가 보일 때 글쓰기 버튼 보이기
			// Q&A 열 때 모든 답변 숨기기
			const answers = document.querySelectorAll('.answer');
			answers.forEach(answer => {
				answer.style.display = 'none'; // 모든 답변 숨김
			});
			// 공지사항 내용 숨기기
			const noticeContents = document.querySelectorAll('.notice-content');
			noticeContents.forEach(content => {
				content.style.display = 'none'; // 모든 공지사항 내용 숨김
			});
		}

		// 공지사항 리스트를 토글하는 함수
		function toggleNotice() {
			setActiveMenu('noticeMenu'); // 클릭한 메뉴에 active 클래스 추가
			const noticeList = document.getElementById("noticeList");
			noticeList.style.display = noticeList.style.display === "none" || noticeList.style.display === "" ? "block" : "none";

			const faqContent = document.getElementById("faqContent");
			faqContent.style.display = "none"; // 공지사항이 열릴 때 FAQ 숨기기

			const qnaList = document.getElementById("qnaList");
			qnaList.style.display = "none"; // 공지사항이 열릴 때 Q&A 숨기기

			const writeButton = document.getElementById("writeButton");
			writeButton.style.display = "none"; // 공지사항을 열 때 버튼 숨기기

			// 공지사항 열 때 모든 답변 숨기기
			const answers = document.querySelectorAll('.answer');
			answers.forEach(answer => {
				answer.style.display = 'none'; // 모든 답변 숨김
			});
		}



		function displayAnswer(row, answerContent) {
			const existingAnswer = row.nextElementSibling;

			if (existingAnswer && existingAnswer.classList.contains('answer')) {
				existingAnswer.style.display = existingAnswer.style.display === 'none' || existingAnswer.style.display === '' ? 'table-row' : 'none';
			} else {
				const newRow = document.createElement('tr');
				newRow.className = 'answer';

				// answerContent가 null일 경우 메시지 출력
				const content = answerContent ? answerContent : "답변이 등록되지 않았습니다.";

				newRow.innerHTML = `<td colspan="4" style="text-align: left; padding-left: 20px;">${content}</td>`;

				row.parentNode.insertBefore(newRow, row.nextSibling);
			}
		}
	</script>
</body>

</html>